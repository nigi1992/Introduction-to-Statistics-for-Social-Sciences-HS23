---
title: "Capstone-Project-HS23-for-ISSS-Seminar"
output: html_document
---
This Capstone project is about the relationship between the size of a country and its level of democracy. I ask the following research question: "Is there a relationship between the size of a country and its level of democracy, ie. its Freedom Score?". 

While thinking about a research question, I thought about my bachelor thesis on micro states and their relationship to democracy and monarchy respectively. My thesis was strictly qualitative and solely focused on two single countries (Monaco and Liechtenstein), but while researching the literature I stumbled upon a variety of democracy indexes, among others the Freedom House Index, which ranks countries worldwide according to democratization. I remembered there being a general correlation between small states and democracy and had a look at my paper again, where I found the following passage:
"It turns out that there is a connection between monarchy and smallness as well as between democratization and smallness that should not be ignored. On the one hand, there appears to be a clear statistical correlation between
state size and democratic governments. Small states are more likely to be democratic than large ones (Diamond and Tsalik 1999; Ott 2000; Anckar 2002; Srebrnik 2004)." (p.16).
Though already seemingly well established, I still got curious and wanted to see if this correlation holds true by regressing the so called Freedom Score from Freedom House on the population size of a country. My thinking was: "The smaller the country, the more likely it is to be democratic and the higher its Freedom Score should be". I also included a confounding variable, for which I chose GDP per Capita. I thought that the wealthier a country is, the more likely it is to be democratic. I wanted to see if the relationship between population size and democracy is still significant, when controlling for GDP per Capita.
The Freedom Score is a composite score of political rights and civil liberties. It is a score between 0 and 100, where 0 is counted as least free and 100 as most free. The score is based on a number of indicators, which are weighted differently. The score is then divided into three categories: Free (F), Partly Free (PF) and Not Free (NF). 
In order to accomplish this I needed to merge the Freedom House data set with a different data set that contained the Population Size for each country. The same had to be done for a third data set that contained the GDP per Capita for each country. At first, I downloaded to wrong data set, which lists nominal instead of PPP GDP per Capita (Purchase Power Parity), but luckily I noticed my mistake. I used data sets of the World Bank for both of this.

The data sets were found on the following websites:
https://freedomhouse.org/sites/default/files/2023-02/Aggregate_Category_and_Subcategory_Scores_FIW_2003-2023.xlsx 
https://api.worldbank.org/v2/en/indicator/SP.POP.TOTL?downloadformat=excel 
https://api.worldbank.org/v2/en/indicator/NY.GDP.PCAP.PP.CD?downloadformat=excel 

Merging these three data sets was not straight forward and I had to undertake a number of steps to clean and prepare the data. I had to select, filter, rename, merge and convert. I also had to deal with missing values and outliers. The dpylr package and its pipe operator %>% was here especially helpful. It is also worth mentioning that I only looked at values for the year 2022 and did not include a time-series model. These steps are all documented in the "Data Preparation.R" file. 
Please note that all the data sets I used, are included in this repository in the folder. I have included the final data set "fh_pop_gdp.csv" in the "Input Data" folder, as to avoid having to upload and adjust 3 different Excel Files. A command to read said csv file is included at the beginning of the Statistical Analysis File. It is therefore not necessary to run the following code chunk. 
```{r}
### Data Preparation
#### Importing the data

# Importing Freedom House Aggregate Scores (xlsx)
install.packages("readxl")
library(readxl)
#file_path <- "Input Data/data.xlsx"
# Reading Excel file
fh_data <- read_excel("/Users/nicolaswaser/New-project-GitHub-first/R/Capstone Project HS23/Input Data/Aggregate_Category_and_Subcategory_Scores_FIW_2003-2022.xlsx")
head(fh)
View(fh)

# Importing Population Data (xls)
Pop_data <- read_excel("/Users/nicolaswaser/New-project-GitHub-first/R/Capstone Project HS23/Input Data/API_SP.POP.TOTL_DS2_en_excel_v2_6299418.xls")
head(Pop_data)
View(Pop_data)

# Importing GDP per Capita Data (xls)
GDPperCapita_data <- read_excel("/Users/nicolaswaser/New-project-GitHub-first/R/Capstone Project HS23/Input Data/API_NY.GDP.PCAP.PP.CD_DS2_en_excel_v2_6299221.xls")
head(GDPperCapita_data)
View(GDPperCapita_data)

# Preparing the data for merge
install.packages(dplyr)
library(dplyr)

# selecting relevant columns, filtering out territories + year earlier than 2022 and renaming columns
fh <- fh_data %>% select(`Country/Territory`, `C/T?`, `Edition`, `Status`, `PR`, `CL`, `Total`) %>%
  filter(`C/T?` == "c" & `Edition` == "2022") %>%
  rename(Country = `Country/Territory`, Year = `Edition`, Status = `Status`, Political_Rights = `PR`, Civil_Liberties = `CL`, Total_Score = `Total`)
class(fh$Total_Score)
class(fh$Status)

# same for population data, but also removing the first 3 rows
colnames(Pop_data)
Pop <- Pop_data %>% select(`Data Source`, `...67`) %>%
  rename(Country = `Data Source`, Population = `...67`) %>% 
  slice(-1:-3)
# turns out values are set as characters which is not ideal for later calculations
class(Pop$Population)
# converting to numeric
Pop$Population <- as.numeric(Pop$Population)
class(Pop$Population)

# same for GDP per capita data
GDPperCapita <- GDPperCapita_data %>% select(`Data Source`, `...67`) %>%
  rename(Country = `Data Source`, GDP_per_Capita = `...67`) %>% 
  slice(-1:-3)
# converting to numeric
GDPperCapita$GDP_per_Capita <- as.numeric(GDPperCapita$GDP_per_Capita)

# Merging the data
# merging Freedom House and Population data
fh_pop <- fh %>% left_join(Pop, by = "Country")
# merging Freedom House, Population and GDP per Capita data
fh_pop_gdp <- fh_pop %>% left_join(GDPperCapita, by = "Country")

# Filtering NA values
fh_pop_gdp <- filter(fh_pop_gdp, !is.na(GDP_per_Capita) & !is.na(Population))
View(fh_pop_gdp)

# Saving as csv.file
file_path <- "/Users/nicolaswaser/New-project-GitHub-first/R/Capstone Project HS23/Input Data/fh_pop_gdp.csv"
write.csv(fh_pop_gdp, file_path, row.names = FALSE)

```
However, one might still have to change the file path at the beginning of the next script in order to load the correct data frame, which I used for the regression analysis. Most of the work can be found here in the "Statistical Analysis.R" file: 
```{r}
### Statistical Analysis
## Bi-Variate Model
# The bi-variate model is used to determine the relationship between the two variables: Population and Freedom Score
library(tidyverse)

# importing the data
library(readr)
file_path <- "/Users/nicolaswaser/New-project-GitHub-first/R/Capstone Project HS23/Input Data/fh_pop_gdp.csv"
fh_pop_gdp <- read_csv(file_path)

## Regression Model 1
fit1 <- lm(fh_pop_gdp$Total_Score ~ fh_pop_gdp$Population, data = fh_pop_gdp)
summary(fit1)
```
This first attempt at simply regressing the Freedom Score on the Population Size was unsatisfactory. 

- explain what you did next until you got to the final model
- interpret the fit_ord and the fit1c
- also include the graphs from Data visualization
- continue with the interpretation of fit2 and the regression table
- explain what you would do if you had more time
- include more years to get a more complete picture (time-series), more confounding variables, such as republic/monarchy, year of independence (ex colonies), and for the dependent variable I could look at different democracy indexes such as Polity IV, Demokratie Barometer, V-Dem, etc.
- also interesting in this regard for a different research question is the well established positive correlation between "rule of law" scores and the wealth of a country, which could be further looked at by using the Freedom Score Indicators that gives a score to the rule of law in a country and regressing it on GDP per Capita.























